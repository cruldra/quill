---
title: 历史模块
---

历史模块负责处理 Quill 的撤消和重做。它可以使用以下选项进行配置:

## 配置

#### delay

- 默认值: `1000`

在 `delay` 毫秒数内发生的更改将合并为单个更改。

例如,将 delay 设置为 `0`,几乎每个字符都记录为一个更改,因此撤消将一次撤消一个字符。将 delay 设置为 `1000`,撤消将撤消在最后 1000 毫秒内发生的所有更改。

#### maxStack

- 默认值: `100`

历史记录的撤消/重做堆栈的最大大小。使用 `delay` 选项合并的更改计为单个更改。

#### userOnly

- 默认值: `false`

默认情况下,所有更改,无论是源自用户输入还是通过 API 以编程方式进行,都被同等对待,并且可以由历史模块撤消或重做。如果 `userOnly` 设置为 `true`,则只有用户更改才会被撤消或重做。

### 示例

```javascript
const quill = new Quill('#editor', {
  modules: {
    history: {
      delay: 2000,
      maxStack: 500,
      userOnly: true
    },
  },
  theme: 'snow'
});
```

## API

#### clear

清除历史堆栈。

**方法**

```js
clear()
```

**示例**

```js
quill.history.clear();
```

#### cutoff

通常,在短时间内进行的更改(由 `delay` 配置)会合并为单个更改,因此触发撤消将撤消多个更改。使用 `cutoff()` 将重置合并窗口,以便在调用 `cutoff()` 之前和之后的更改不会被合并。

**方法**

```js
cutoff()
```

**示例**

```js
quill.history.cutoff();
```

#### undo

撤消上次更改。

**方法**

```js
undo()
```

**示例**

```js
quill.history.undo();
```

#### redo

如果上次更改是撤消,则重做此撤消。否则不执行任何操作。

**方法**

```js
redo()
```

**示例**

```js
quill.history.redo();
```

---
title: 工具栏模块
---

工具栏模块允许用户轻松格式化 Quill 的内容。

<div className="quill-wrapper">
  <div id="toolbar-toolbar" className="toolbar">
    <span className="ql-formats">
      <select className="ql-font">
        <option selected></option>
        <option value="serif"></option>
        <option value="monospace"></option>
      </select>
      <select className="ql-size">
        <option value="small"></option>
        <option selected></option>
        <option value="large"></option>
        <option value="huge"></option>
      </select>
    </span>
    <span className="ql-formats">
      <button className="ql-bold"></button>
      <button className="ql-italic"></button>
      <button className="ql-underline"></button>
      <button className="ql-strike"></button>
    </span>
    <span className="ql-formats">
      <select className="ql-color"></select>
      <select className="ql-background"></select>
    </span>
    <span className="ql-formats">
      <button className="ql-list" value="ordered"></button>
      <button className="ql-list" value="bullet"></button>
      <select className="ql-align">
        <option selected></option>
        <option value="center"></option>
        <option value="right"></option>
        <option value="justify"></option>
      </select>
    </span>
    <span className="ql-formats">
      <button className="ql-link"></button>
      <button className="ql-image"></button>
    </span>
  </div>
  <Editor
    style={{ display: 'none' }}
    config={{
      modules: {
        toolbar: { container: '#toolbar-toolbar' },
      },
      theme: 'snow',
    }}
  />
</div>

它可以配置自定义容器和处理程序。

```javascript
const quill = new Quill('#editor', {
  modules: {
    toolbar: {
      container: '#toolbar', // 工具栏容器的选择器
      handlers: {
        bold: customBoldHandler
      }
    }
  }
});
```

因为 `container` 选项非常常见,所以也允许使用顶级简写。

```javascript
const quill = new Quill('#editor', {
  modules: {
    // 等同于 { toolbar: { container: '#toolbar' }}
    toolbar: '#toolbar'
  }
});
```

## 容器

工具栏控件可以通过简单的格式名称数组或自定义 HTML 容器来指定。

首先从更简单的数组选项开始:

```javascript
const toolbarOptions = ['bold', 'italic', 'underline', 'strike'];

const quill = new Quill('#editor', {
  modules: {
    toolbar: toolbarOptions
  }
});
```

控件也可以通过嵌套一级数组来分组。这将把控件包装在一个类名为 `ql-formats` 的 `<span>` 中,为主题提供可利用的结构。例如,[Snow](/docs/themes/#snow/) 在控件组之间添加额外的间距。

```javascript
const toolbarOptions = [['bold', 'italic'], ['link', 'image']];
```

具有自定义值的按钮可以用一个对象来指定,格式名称作为其唯一的键。

```javascript
const toolbarOptions = [{ header: '3' }];
```

下拉列表类似地由对象指定,但具有可能值的数组。CSS 用于控制下拉选项的视觉标签。

```javascript
// 注意 false,而不是 'normal',是正确的值
// quill.format('size', false) 删除格式,
// 允许默认样式工作
const toolbarOptions = [
  { size: [ 'small', false, 'large', 'huge' ]}
];
```

请注意,[主题](/docs/themes/)也可以为下拉列表指定默认值。例如,如果设置为空数组,[Snow](/docs/themes/#snow/) 为 `color` 和 `background` 格式提供了 35 种颜色的默认列表。

```javascript
const toolbarOptions = [
  ['bold', 'italic', 'underline', 'strike'],        // 切换按钮
  ['blockquote', 'code-block'],
  ['link', 'image', 'video', 'formula'],

  [{ 'header': 1 }, { 'header': 2 }],               // 自定义按钮值
  [{ 'list': 'ordered'}, { 'list': 'bullet' }, { 'list': 'check' }],
  [{ 'script': 'sub'}, { 'script': 'super' }],      // 上标/下标
  [{ 'indent': '-1'}, { 'indent': '+1' }],          // 减少缩进/增加缩进
  [{ 'direction': 'rtl' }],                         // 文本方向

  [{ 'size': ['small', false, 'large', 'huge'] }],  // 自定义下拉列表
  [{ 'header': [1, 2, 3, 4, 5, 6, false] }],

  [{ 'color': [] }, { 'background': [] }],          // 使用主题默认值的下拉列表
  [{ 'font': [] }],
  [{ 'align': [] }],

  ['clean']                                         // 删除格式按钮
];

const quill = new Quill('#editor', {
  modules: {
    toolbar: toolbarOptions
  },
  theme: 'snow'
});
```

对于需要更多自定义的用例,你可以在 HTML 中手动创建工具栏,并将 DOM 元素或选择器传递给 Quill。`ql-toolbar` 类将被添加到工具栏容器中,Quill 会将适当的处理程序附加到类名为 `ql-${format}` 形式的 `<button>` 和 `<select>` 元素。按钮元素可以选择性地具有自定义 `value` 属性。

```html
<!-- 创建工具栏容器 -->
<div id="toolbar">
  <!-- 添加字体大小下拉列表 -->
  <select class="ql-size">
    <option value="small"></option>
    <!-- 注意缺失的值(因此为假值)用于重置为默认值 -->
    <option selected></option>
    <option value="large"></option>
    <option value="huge"></option>
  </select>
  <!-- 添加粗体按钮 -->
  <button class="ql-bold"></button>
  <!-- 添加下标和上标按钮 -->
  <button class="ql-script" value="sub"></button>
  <button class="ql-script" value="super"></button>
</div>
<div id="editor"></div>

<!-- 使用工具栏初始化编辑器 -->
<script>
  const quill = new Quill('#editor', {
    modules: {
      toolbar: '#toolbar'
    }
  });
</script>
```

请注意,通过提供你自己的 HTML 元素,Quill 会搜索特定的输入元素,但你自己的与 Quill 无关的输入仍然可以添加、样式化并共存。

```html
<div id="toolbar">
  <!-- 像以前一样添加按钮 -->
  <button class="ql-bold"></button>
  <button class="ql-italic"></button>

  <!-- 但你也可以添加自己的 -->
  <button id="custom-button"></button>
</div>
<div id="editor"></div>

<script>
  const quill = new Quill('#editor', {
    modules: {
      toolbar: '#toolbar',
    },
  });

  const customButton = document.querySelector('#custom-button');
  customButton.addEventListener('click', function () {
    console.log('Clicked!');
  });
</script>
```

## 处理程序

工具栏控件默认应用和删除格式,但你也可以使用自定义处理程序覆盖此行为,例如为了显示外部 UI。

处理程序函数将绑定到工具栏(因此使用 `this` 将引用工具栏实例),如果相应的格式处于非活动状态,则传递输入的 `value` 属性,否则传递 `false`。添加自定义处理程序将覆盖默认的工具栏和主题行为。

```javascript
const toolbarOptions = {
  handlers: {
    // handlers 对象将与默认 handlers 对象合并
    link: function (value) {
      if (value) {
        const href = prompt('Enter the URL');
        this.quill.format('link', href);
      } else {
        this.quill.format('link', false);
      }
    }
  }
};

const quill = new Quill('#editor', {
  modules: {
    toolbar: toolbarOptions
  }
});

// 处理程序也可以在初始化后添加
const toolbar = quill.getModule('toolbar');
toolbar.addHandler('image', showImageUI);
```
